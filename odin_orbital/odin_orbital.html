<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>odin_orbital - ODIN</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="the Open Data Integration Framework">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../odin.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../about.html">About this Document</a></li><li class="chapter-item expanded "><a href="../install.html">Installation</a></li><li class="chapter-item expanded "><a href="../intro.html">1. Introduction</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../design_principles.html">Design Principles</a></li></ol></li><li class="chapter-item expanded "><a href="../sys_crates.html">2. System Crates</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_build/odin_build.html">odin_build</a></li><li class="chapter-item "><a href="../odin_action/odin_action.html">odin_action</a></li><li class="chapter-item "><a href="../odin_actor/odin_actor.html">odin_actor</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_actor/actor_basics.html">Actor Programming Model</a></li><li class="chapter-item "><a href="../odin_actor/actor_impl.html">Basic Design</a></li><li class="chapter-item "><a href="../odin_actor/actor_communication.html">Actor Communication</a></li><li class="chapter-item "><a href="../odin_actor/examples/examples.html">Examples</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_actor/examples/hello_world.html">hello_world</a></li><li class="chapter-item "><a href="../odin_actor/examples/sys_msgs.html">sys_msgs</a></li><li class="chapter-item "><a href="../odin_actor/examples/spawn.html">spawn</a></li><li class="chapter-item "><a href="../odin_actor/examples/spawn_blocking.html">spawn_blocking</a></li><li class="chapter-item "><a href="../odin_actor/examples/exec.html">exec</a></li><li class="chapter-item "><a href="../odin_actor/examples/jobs.html">jobs</a></li><li class="chapter-item "><a href="../odin_actor/examples/producer_consumer.html">producer_consumer</a></li><li class="chapter-item "><a href="../odin_actor/examples/pub_sub.html">pub_sub</a></li><li class="chapter-item "><a href="../odin_actor/examples/pin_pong.html">ping_pong</a></li><li class="chapter-item "><a href="../odin_actor/examples/query.html">query</a></li><li class="chapter-item "><a href="../odin_actor/examples/dyn_actor.html">dyn_actor</a></li><li class="chapter-item "><a href="../odin_actor/examples/actions.html">actions</a></li><li class="chapter-item "><a href="../odin_actor/examples/dyn_actions.html">dyn_actions</a></li><li class="chapter-item "><a href="../odin_actor/examples/retry.html">retry</a></li><li class="chapter-item "><a href="../odin_actor/examples/requests.html">requests</a></li><li class="chapter-item "><a href="../odin_actor/examples/actor_config.html">actor_config</a></li><li class="chapter-item "><a href="../odin_actor/examples/heartbeat.html">heartbeat</a></li></ol></li></ol></li><li class="chapter-item "><a href="../odin_server/odin_server.html">odin_server</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_server/client.html">Server/Client Interaction</a></li><li class="chapter-item "><a href="../odin_server/ui_library.html">Web Client UI Library</a></li></ol></li><li class="chapter-item "><a href="../odin_cesium/odin_cesium.html">odin_cesium</a></li><li class="chapter-item "><a href="../odin_share/odin_share.html">odin_share</a></li><li class="chapter-item "><a href="../odin_dem/odin_dem.html">odin-dem</a></li><li class="chapter-item "><a href="../odin_gdal/odin_gdal.html">odin-gdal</a></li></ol></li><li class="chapter-item expanded "><a href="../app_crates.html">3. Application Domain Crates</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_hrrr/odin_hrrr.html">odin_hrrr</a></li><li class="chapter-item "><a href="../odin_sentinel/odin_sentinel.html">odin_sentinel</a></li><li class="chapter-item "><a href="../odin_goesr/odin_goesr.html">odin_goesr</a></li><li class="chapter-item expanded "><a href="../odin_orbital/odin_orbital.html" class="active">odin_orbital</a></li></ol></li><li class="chapter-item expanded "><a href="../glossary.html">Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ODIN</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="odin_orbital"><a class="header" href="#odin_orbital">odin_orbital</a></h1>
<p>This is a user domain crate that supports orbit calculation, download, and processing of polar orbiting satellite data products, including the Visible Infrared Imaging Radiometer Suite (<a href="https://ladsweb.modaps.eosdis.nasa.gov/missions-and-measurements/viirs/">VIIRS</a>) hotspot detection instrument aboard the NOAA Joint Polar Satellite System (<a href="https://www.nesdis.noaa.gov/our-satellites/currently-flying/joint-polar-satellite-system">JPSS</a>). Other currently supported instruments for hotspot detection include the Moderate Resolution Imaging Spectroradiometer <a href="https://www.earthdata.nasa.gov/data/instruments/modis">MODIS</a> aboard the Terra and Aqua systems. Since the availability of new data is dependent the next overpass calculated from orbital trajectories, the crate provides tools to identify overpasses over a specified region and download data accordingly.</p>
<p>While the current ODIN support is specialized for hotspot detection, components of <code>odin_orbital</code>, including orbit trajectory calculation, are generealized for use with any polar orbiting satellite. The main functions and general steps of this user domain crate are:</p>
<ol>
<li>overpass identification for a large region through orbit propogation</li>
<li>async overpass import/notification with orbit actor</li>
<li>timely (minimal latency) data retrieval according to overpass notifications</li>
<li>translation of external data format (e.g., CSV) into internal data model</li>
<li>async data import/notification with import actor</li>
<li>web (micro) service for browser based visualization</li>
<li>archive replay (TBD)</li>
</ol>
<p>The structure of the system is shown in the figure below. First an <code>OrbitActor</code> is instantiated, which calculates overpasses for a large region using an implementation of the <code>OrbitCalculator</code> trait. In this trait, a task is started to regularly query TLEs from an external server, calculate orbital trajectories, and filter the trajectories into discrete overpasses for a specified large region. Once the first calcution is performed, the <code>OrbitActor</code> sends the <code>OrbitSatImporterActor</code> an <code>OrbitsReady</code> message. Note that the <code>OrbitActor</code> is inteded to be used to calculate lists of overpasses of a large region, then filter those lists for overpasses of smaller regions of interest defined in the importer(s).</p>
<p>Now that a list of initial overpasses is available, the <code>OrbitSatImporterActor</code> activates and implementation of the <code>OrbitSatImporter</code> trait and queries an external data server (e.g., FIRMS) for data of interest (e.g., hotspots). The initial overpass list, as well as additional configuration values (e.g., request delay) is used to build a schedule for future data queries. The <code>OrbitSatImporter</code> starts a task to request the data according to the future schedule, as well as request new overpasses once the old ones expire. Processed data and overpasses are stored in the actor, then sent to the <code>WebServerActor</code> to be displayed in a browser via definitions in the <code>OrbitalService</code> and the main actor system definition (see show_jpss)</p>
<pre><code>                     ┌──────────────────────────────────────────────────────────────────┐                    
                     │                                                                  │                    
                     │  ┌────────────────────────┐                                      │                    
                     │  │      OrbitActor        │                                      │                    
                     │  │ ┌────────────────────┐ │                                      │                    
                     │  │ │   OverpassList     │ │                                      │                    
                     │  │ └─────────▲──────────┘ │                                      │                    
                     │  │           │            │                                      │                    
┌───────────┐        │  │           │            │                                      │                    
│           ├─┐      │  │┌──────────┼───────────┐│                                      │                    
│ TLE Server│ ◄───http──┼┼─                     ││                                      │                    
│           │ │         ││   OrbitCalculator    ││                                      │                    
│           │ ┼─response┼┼►                     ││                                      │                    
└┬──────────┘ │      │  │└─────┬────────────────┘│                                      │                    
 └────────────┘      │  └──────┼────────────▲──┬─┘                                      │                    
                     │         │            │  │                                        │                    
                     │   Orbits│   Query&lt;AskOverpassRequest,                            │                    
                     │   ready │    UpdateOverpassList&gt;                                 │                    
                     │         │            │  │                                        │                    
                     │  ┌──────▼────────────┴──▼─┐               ┌────────────────────┐ │                    
┌───────────┐        │  │  OrbitSatImportActor   │               │ WebServerActor     │ │                    
│           ├─┐      │  │                        ┼──Overpasses───► ┌────────────────┐ │ │                    
│Data Server│ │      │  │  ┌──────────────────┐  │               │ │                │ │ │                    
│(FIRMS,etc.) ◄── http──┼──┼                  │  ┼───DataSets────► │ OrbitalService ├─┼─┼───────► Web Browser
│           │ │         │  │OrbitalSatImporter┼─┐│               │ │                │ │ │                    
└┬──────────┘ ┼response─┼──┼►                 │ ││               │ │                │ │ │                    
 └────────────┘      │  │  └────────┬─────────┘ ││               │ └────────────────┘ │ │                    
                     │  │           │           ││               │                    │ │                    
                     │  │   ┌───────▼─────────┐ ││               └────────────────────┘ │                    
                     │  │   │   DataStore     │ ││                                      │                    
                     │  │   └─────────────────┘ ││                                      │                    
                     │  │   ┌─────────────────┐ ││                                      │                    
                     │  │   │   OverpassList  ◄─┘│                                      │                    
                     │  │   └─────────────────┘  │                                      │                    
                     │  └────────────────────────┘                                      │                    
                     │                                                                  │                    
                     └──────────────────────────────────────────────────────────────────┘                    
</code></pre>
<h2 id="modules"><a class="header" href="#modules">modules</a></h2>
<ul>
<li>the main <code>lib</code> module contains the common hotspot data model and functions to download and translate respective datasets from NASA <a href="https://firms.modaps.eosdis.nasa.gov/">FIRMS</a></li>
<li>the <code>overpass</code> module contains the general (non-application specific) data model and functions for orbit trajectory calculation, including TLE acquisition from <a href="https://celestrak.org/">CelesTrak</a> or <a href="https://www.space-track.org/auth/login">SpaceTrack</a>, orbit propogation via SGP4, and orbit formatting.</li>
<li>the <code>orbital_geo</code> module holds functions to compute ground track points from orbits</li>
<li><code>live_importer</code> does the orbit calculation schedule computation, data download schedule computation, and realtime data import from FIRMs. It also contains definitions of respective configuration data.</li>
<li><code>actor</code> holds the import actor definition that makes the internal orbit and hotspot data models available in an actor context that provides three
action points (see [odin_action])
<ul>
<li>init (taking the initial data as action input)</li>
<li>update (for each new hotspot and overpass data set)</li>
<li>on-demand snapshot (requested per message, taking the whole current hotspot store and overpass list as action input)</li>
</ul>
</li>
<li><code>orbital_service</code> provides the web-based microservice for browser visualization</li>
<li><code>errors</code> has the error type definition for the <code>odin_jpss</code> crate</li>
</ul>
<h2 id="configuration"><a class="header" href="#configuration">configuration</a></h2>
<p>Several .ron configuration files are needed for building an orbital actor system for a given satellite, including:</p>
<ul>
<li><code>LiveOrbitalSatConfig</code>: configuration for a live actor system, includes satellite id, name, data history length, clean up interval, and max age of data stored</li>
<li><code>OrbitalSatOrbitCalculatorConfig</code>: configuration for orbit calculator, includes the region to calculate overpasses for and the time between calculating overpasses</li>
<li><code>OrbitalSatImporterConfig</code>: configuration for data importer, including server URL, API map key, region of interest, and request delays for quering URT and NRT data. The free map key has to be obtained from <a href="https://firms.modaps.eosdis.nasa.gov/api/map_key/">https://firms.modaps.eosdis.nasa.gov/api/map_key/</a></li>
<li><code>OrbitalSatelliteInfo</code>: configuration for webserver, including satellite name and description for display</li>
</ul>
<h2 id="tool-executables"><a class="header" href="#tool-executables">tool executables</a></h2>
<ul>
<li><code>get_tles</code> bin - this is a test and production tool to download and read in Two-Line Elements used in orbit propogation</li>
<li><code>get_orbit</code> bin - this is a test and production tool to calculate and save overpasses from a specified satellite over a given region</li>
<li><code>get_jpss</code> bin - this is a test and production to download and translate JPSS VIIRS hotspots from FIRMS</li>
<li><code>read_jpss</code> bin - this is a test and production tool to read and translate an existing CSV file of JPSS VIIRS hotspots into the internal data model</li>
<li><code>show_jpss</code> bin - this is a test and production tool to implement the end-to-end microservice for the JPSS NOAA-20 satellite including orbit actors, import actors, and a webserver</li>
</ul>
<h2 id="example-execuables"><a class="header" href="#example-execuables">example execuables</a></h2>
<ul>
<li><code>jpss_actors</code> example - this shows how to instantiate and connect an [<code>OrbitActor</code>] and [<code>OrbitalSatImportActor</code>], which calculate overpasses and import data respectively</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../odin_goesr/odin_goesr.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../glossary.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../odin_goesr/odin_goesr.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../glossary.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
