# Data Lookup - Building Stand-Alone Executables

odin-rs is primarily used to build servers, which commonly requires data that is not directly generated or included in the sources.
There are two major types of such data:

- configuration
- assets

Configuration data contains parameters that should not be hardwired in the sources or dynamically entered (either via command line
or user prompt). As it might be sensitive (e.g. containing user authentication) such data should not even be kept in the source repository.

Assets are static data objects we serve with odin-rs that are generated by external tools or use non-Rust code (e.g. svg-images or
javascript code), hence they should be kept as separate files within the repository but outside the normal source tree.

The general mode of operation for servers is to resolve such resources at runtime from the file system. Since we also want to 
run local odin-rs servers efficiently and with minimal installation (exe only) we also support embedded config/asset data, which
automatically links generated modules containing the raw, compressed and/or encrypted data (not requiring the file system at runtime).

## Requirements

- standalone operation with memory-lookup (all essential config/assets statically linked from source)
- file system override (optional)
    - single root (ODIN_HOME)
    - shared configs (crate specific)
    - app override (app/crate specific)
    - `./config`, `./assets` in build crate
- file/mem lookup transparent at the source level
    - `config_for!( [crate,] filename)` macro for configs
    - `ServeDir`, `ServeMem` chain for assets 
- encryption for selected configs/assets
    - timer-based caching for credentials (no re-enter during system initialization)
    - encryption method (pw, pgp) set via build features



## Filesystem

{anchor} / {crate}/{type}/{name}.{ext}

{anchor} is either
- 

{crate} is the name of the crate this data is associated with

{type} is either `config` or `asset` 




## Embedded

```
┌────────────────┐                                                              
│crate odin_build│                                                              
└───────┬────────┘                                                              
        │          ┌─────────────────────┐                                      
        │          │ crate A             │                                      
        │          │                     │                                      
        │          │   Cargo.toml        │     ┌───────────┐                    
        └──────────┼─► build.rs  ────────┼────►│config_data│                    
                   │   src/              │     └┬─────▲────┘                    
                   │     lib.rs          │      │     │                         
                   │     config.rs ◄─────┼──────┘     │      ODIN_LOCAL/        
                   │     ...             │            │        A/               
                   │   config/ ──────────┼────────────┴───────── config/        
                   │     my_config.ron   │                         my_config.ron
                   └─────────────────────┘                                      
```