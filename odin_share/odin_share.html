<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>odin_share - ODIN</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="the Open Data Integration Framework">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../odin.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../about.html">About this Document</a></li><li class="chapter-item expanded "><a href="../install.html">Installation</a></li><li class="chapter-item expanded "><a href="../intro.html">1. Introduction</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../design_principles.html">Design Principles</a></li></ol></li><li class="chapter-item expanded "><a href="../sys_crates.html">2. System Crates</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_build/odin_build.html">odin_build</a></li><li class="chapter-item "><a href="../odin_action/odin_action.html">odin_action</a></li><li class="chapter-item "><a href="../odin_actor/odin_actor.html">odin_actor</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_actor/actor_basics.html">Actor Programming Model</a></li><li class="chapter-item "><a href="../odin_actor/actor_impl.html">Basic Design</a></li><li class="chapter-item "><a href="../odin_actor/actor_communication.html">Actor Communication</a></li><li class="chapter-item "><a href="../odin_actor/examples/examples.html">Examples</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_actor/examples/hello_world.html">hello_world</a></li><li class="chapter-item "><a href="../odin_actor/examples/sys_msgs.html">sys_msgs</a></li><li class="chapter-item "><a href="../odin_actor/examples/spawn.html">spawn</a></li><li class="chapter-item "><a href="../odin_actor/examples/spawn_blocking.html">spawn_blocking</a></li><li class="chapter-item "><a href="../odin_actor/examples/exec.html">exec</a></li><li class="chapter-item "><a href="../odin_actor/examples/jobs.html">jobs</a></li><li class="chapter-item "><a href="../odin_actor/examples/producer_consumer.html">producer_consumer</a></li><li class="chapter-item "><a href="../odin_actor/examples/pub_sub.html">pub_sub</a></li><li class="chapter-item "><a href="../odin_actor/examples/pin_pong.html">ping_pong</a></li><li class="chapter-item "><a href="../odin_actor/examples/query.html">query</a></li><li class="chapter-item "><a href="../odin_actor/examples/dyn_actor.html">dyn_actor</a></li><li class="chapter-item "><a href="../odin_actor/examples/actions.html">actions</a></li><li class="chapter-item "><a href="../odin_actor/examples/dyn_actions.html">dyn_actions</a></li><li class="chapter-item "><a href="../odin_actor/examples/retry.html">retry</a></li><li class="chapter-item "><a href="../odin_actor/examples/requests.html">requests</a></li><li class="chapter-item "><a href="../odin_actor/examples/actor_config.html">actor_config</a></li><li class="chapter-item "><a href="../odin_actor/examples/heartbeat.html">heartbeat</a></li></ol></li></ol></li><li class="chapter-item "><a href="../odin_server/odin_server.html">odin_server</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_server/client.html">Server/Client Interaction</a></li><li class="chapter-item "><a href="../odin_server/ui_library.html">Web Client UI Library</a></li></ol></li><li class="chapter-item "><a href="../odin_cesium/odin_cesium.html">odin_cesium</a></li><li class="chapter-item expanded "><a href="../odin_share/odin_share.html" class="active">odin_share</a></li><li class="chapter-item "><a href="../odin_dem/odin_dem.html">odin-dem</a></li><li class="chapter-item "><a href="../odin_gdal/odin_gdal.html">odin-gdal</a></li></ol></li><li class="chapter-item expanded "><a href="../app_crates.html">3. Application Domain Crates</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../odin_geolayer/odin_geolayer.html">odin_geolayer</a></li><li class="chapter-item "><a href="../odin_hrrr/odin_hrrr.html">odin_hrrr</a></li><li class="chapter-item "><a href="../odin_sentinel/odin_sentinel.html">odin_sentinel</a></li><li class="chapter-item "><a href="../odin_goesr/odin_goesr.html">odin_goesr</a></li><li class="chapter-item "><a href="../odin_orbital/odin_orbital.html">odin_orbital</a></li></ol></li><li class="chapter-item expanded "><a href="../glossary.html">Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ODIN</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="odin_share"><a class="header" href="#odin_share">odin_share</a></h1>
<p>The <code>odin_share</code> system crate provides the means to share string labeled data between <a href="../odin_actor/odin_actor.html">actors</a> and
<a href="../odin_server/odin_server.html">micro services</a>. It therefore is also the basis for sharing interactively created data between users of
the same ODIN server.</p>
<p>The data model on which <code>odin_server</code> is built is a homogenous, statically typed key value store. Keys are path-like strings and the value type is the generic type parameter of the store. The basic abstraction is an object-safe <code>SharedStore&lt;T&gt;</code> trait that resembles the
interface of a standard <code>HashMap</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    pub trait SharedStore&lt;T&gt; : Send + Sync where T: SharedStoreValueConstraints {
        fn ref_iter&lt;'a&gt;(&amp;'a self)-&gt;Box&lt;dyn Iterator&lt;Item=(&amp;'a String,&amp;'a T)&gt; + 'a&gt;;
        fn clone_iter(&amp;self)-&gt;Box&lt;dyn Iterator&lt;Item=(String,T)&gt; + '_&gt;;

        fn insert(&amp;mut self, k: String, v: T)-&gt;Option&lt;T&gt;;
        fn remove (&amp;mut self, k: &amp;str)-&gt;Option&lt;T&gt;;
        fn get (&amp;self, k: &amp;str)-&gt;Option&lt;&amp;T&gt;;

        fn glob_ref_iter&lt;'a&gt;(&amp;'a self, glob_pattern: &amp;str)-&gt;Result&lt;Box&lt;dyn Iterator&lt;Item=(&amp;'a String,&amp;'a T)&gt; + 'a&gt;, OdinShareError&gt;;
        fn glob_clone_iter(&amp;self, glob_pattern: &amp;str)-&gt;Result&lt;Box&lt;dyn Iterator&lt;Item=(String,T)&gt; + '_&gt;, OdinShareError&gt;;
        ...
    }

    pub trait SharedStoreValueConstraints = Clone + Send + Sync + Debug + 'static + for&lt;'a&gt; Deserialize&lt;'a&gt; + Serialize;
<span class="boring">}</span></code></pre></pre>
<p>This resemblance is intentional - our general use case is a in-memory database of relatively few (&lt;1000&gt;) items, for which a
<code>std::collections::HashMap</code> is a valid choice. Apart from normal item getters/setters the primary operation is to iterate over store items.
Out of the box <code>odin_share</code> therefoer includes a <code>SharedStore</code> impl for <code>std::collections::HashMap</code>.</p>
<p>Persistency is supported by providing a <code>PersistentHashMapStore</code> struct that encapsulates a <code>HashMap</code> which is initialized from and
stored to a JSON file.</p>
<p>The abstraction should also support larger data sets that require disk storage, caches and query mechanisms. Since our data model
is simple we constrain queries to <a href="https://en.wikipedia.org/wiki/Glob_(programming)">glob pattern searches</a> which are supported by the specialized <code>glob_.._iter()</code> iterators.</p>
<p><code>SharedStoreValueConstraints</code> reflects the need to serialize/deserialize store content, send items as messages and to use store trait objects
from async code.</p>
<h2 id="server-side-sharedstore-sharing-via-sharedstoreactor"><a class="header" href="#server-side-sharedstore-sharing-via-sharedstoreactor">Server-side <code>SharedStore</code> sharing via <code>SharedStoreActor</code></a></h2>
<p>How do we use a <code>SharedStore</code> within an ODIN server? While <code>SharedStore</code> implementors could be global they are inherently mutable
and hence a global store would require locking patterns such as:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    use std::sync::{LazyLock,RwLock};
    ...
    static MY_STORE: LazyLock&lt;RwLock&lt;MyStore&gt;&gt; = ...
<span class="boring">}</span></code></pre></pre>
<p>Moreover, since the shared-ness is a critical aspect we also require a notification mechanism that allows callbacks on mutable clients
once a store changes, which makes the use of global objects quite unwieldy (especially in an <code>async</code> context). Hence our primary
use of <code>SharedStore</code> instances is the <a href="../odin_actor/odin_actor.html">actor</a>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct SharedStoreActor&lt;T,S,A&gt; where T: SharedStoreValueConstraints, S: SharedStore&lt;T&gt;, A: DataAction&lt;SharedStoreChange&lt;T&gt;&gt; {
    store: S,
    change_action: A,
    ...
}

define_actor_msg_set! { pub SharedStoreActorMsg&lt;T&gt; where T: SharedStoreValueConstraints = 
    SetSharedStoreValue&lt;T&gt; | RemoveSharedStoreValue | Query&lt;String,Option&lt;T&gt;&gt; | ExecSnapshotAction&lt;T&gt;
}
<span class="boring">}</span></code></pre></pre>
<p>To make the <code>SharedStoreActor</code> type re-usable across different application domains we parameterize it not only with the store item type <code>T</code>, the store type <code>S</code> but also with a generic <a href="../odin_action/odin_action.html">odin action</a> type <code>A</code> of a actor constructor parameter
which defines the "callback" actions to be performed when the store changes. Upon store mutation this <code>odin_action::DataAction</code> is
executed with a</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum SharedStoreChange&lt;T&gt; where T: SharedStoreValueConstraints {
    Set { hstore: ActorHandle&lt;SharedStoreActorMsg&lt;T&gt;&gt;, key: String },
    Remove { hstore: ActorHandle&lt;SharedStoreActorMsg&lt;T&gt;&gt;, key: String },
    ...
}
<span class="boring">}</span></code></pre></pre>
<p>parameter which can be sent to other actors. Recipients of such <code>SharedStoreChange</code> messages can then use its <code>hstore</code> actor handle
to query the changed store values by sending a <code>Query&lt;String,Option&lt;T&gt;&gt;</code> query message to the store actor, or by sending a</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    struct ExecSnapshotAction&lt;T&gt;( pub DynSharedStoreAction&lt;T&gt; )
<span class="boring">}</span></code></pre></pre>
<p>message to the store with an action trait object that will be executed by the store with its own <code>SharedStore&lt;T&gt;</code> trait object parameter.
These patterns look like so in a client actor using the store:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use odin_actor::prelude::*;
use odin_share::prelude::*;

enum StoreItem {...}

struct Client {...}

#[derive(Debug)] struct SomeClientMsg (ActorHandle&lt;SharedStoreActorMsg&lt;StoreItem&gt;&gt;);
define_actor_msg_set! { ClientMsg = SharedStoreChange&lt;StoreItem&gt; | SomeClientMsg }

impl_actor! { match msg for Actor&lt;Client,ClientMsg&gt; as
    SharedStoreChange&lt;StoreItem&gt; =&gt; cont! { // store has changed, query value
        match msg {
            SharedStoreChange::Set{ hstore, key } =&gt; {
                println!("client received update for key: {:?}, now querying value..", key);
                match timeout_query_ref( &amp;hstore, key, secs(1)).await {
                    Ok(response) =&gt; match response {
                        Some( value ) =&gt; ...
                    }
                }
            }
            ...
        }
    }
    ...
    SomeClientMsg =&gt; cont! { // iterate over store items
        let action = dyn_shared_store_action!( =&gt; |store as &amp;dyn SharedStore&lt;StoreItem&gt;| {
            for (k,v) in store.ref_iter() {
                ... // process key-value items
            }
            Ok(())
        });
        msg.0.send_msg( ExecSnapshotAction(action)).await;
    }
}   
<span class="boring">}</span></code></pre></pre>
<p>The actor system construction in turn uses the change action to register clients in the store:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use odin_actor::prelude::*;
use odin_share::prelude::*;

run_actor_system!( asys =&gt; {
    let client = PreActorHandle::new( &amp;asys, "client", 8); 

    let hstore = spawn_actor!( asys, "store", SharedStoreActor::new(
        HashMap::new(),
        data_action!( let client: ActorHandle&lt;ClientMsg&gt; = client.to_actor_handle() =&gt; 
            |update: SharedStoreChange&lt;StoreItem&gt;| Ok( client.try_send_msg( update)? )
        )
    ))?;
    ...
    let client = spawn_pre_actor!( asys, client, Client::new(...))?;
    ...
    Ok(())
}
<span class="boring">}</span></code></pre></pre>
<p>See the <code>enum_store.rs</code> example for further details.</p>
<p>While there is no reason <code>SharedStoreActors</code> cannot be used by any other actor the most common use is as a storage backend for a
<a href="../odin_server/odin_server.html"><code>SpaServer</code> actor</a>. To simplify spawning the <code>SharedStoreActor</code> (and explicitly setting up respective
init and change actions) we therefore provide a <code>odin_share::spawn_server_share_actor(..)</code> method that can be use like so:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use odin_actor::prelude::*;
use odin_server::prelude::*;
use odin_share::prelude::*;

run_actor_system!( actor_system =&gt; {
    let pre_server = PreActorHandle::new( &amp;actor_system, "server", 64);

    let hstore = spawn_server_share_actor(&amp;mut actor_system, "share", pre_server.to_actor_handle(), &amp;"examples/shared_items.json", false)?;

    let hserver = spawn_pre_actor!( actor_system, pre_server, SpaServer::new(
        ...
        SpaServiceList::new()
            ...
            .add( build_service!( let hstore = hstore.clone() =&gt; ShareService::new( hstore)) )
    ))?;
    Ok(())
});
<span class="boring">}</span></code></pre></pre>
<h2 id="abstract-sharing-model"><a class="header" href="#abstract-sharing-model">Abstract Sharing Model</a></h2>
<p>TODO - explain SharedItem (pathname keys), owner, role, subscription</p>
<h2 id="client-side-sharedstore-sharing-via-shareservice"><a class="header" href="#client-side-sharedstore-sharing-via-shareservice">Client-side <code>SharedStore</code> sharing via <code>ShareService</code></a></h2>
<p>While the previous section was about how to use <code>SharedStore</code> between components (actors) <em>within</em> an ODIN server, we
also use this mechanism to share interactively entered data between <em>users</em> of such an ODIN server. Technically this means
we need to provide a <a href="../odin_server/odin_server.html"><code>odin_server::SpaService</code></a> implementation that updates store values
through incoming websocket message handlers and distributes the store changes to other users through outgoing websocket
messages, which are then distributed on the client side to respective <code>SpaService</code> Javascript modules. This is the
purpose of <code>ShareService</code> and its associated <code>odin_share.js</code> Javascript module asset, which in turn depends on and
extends the general <code>main.js</code> module provided by <a href="../odin_server/client.html"><code>odin_server</code></a>.</p>
<p>In addition to the sharing data values <code>SharedStore</code> also supports synchronizing operations between users. It is important
to note this is not unidirectional like screen sharing in video conferencing but allows to perform certain actions such as
view selection remotely. Although such actions are confined to the browser sandbox this is of course security relevant and hence
only takes place if the user explicitly allows it and specifies from whom such shared commands are accepted. This is based
on the <em>role</em> concept - if not already taken a user can identify/register for a role and then - separately - choose to
publish under that role. Other users will automatically see new roles (with their publishing status) and then - through
opt-in - subscribe to certain roles, at which point they will receive published commands from that role. A user can
register for multiple roles.</p>
<p>It is up to the JS modules of respective <code>SpaServices</code> which sync commands they support, both incoming through</p>
<pre><code class="language-javascript">import * as main from "../odin_server/main.js";
...
main.addSyncHandler( handleSyncMessage);
...
function handleSyncMessage (msg) {
    if (msg.updateCamera) {...} // example: reaction to remote view changes (if subscribed)
    ...
}
</code></pre>
<p>or outgoing through</p>
<pre><code class="language-javascript">   ... 
   main.publishCmd( { updateCamera: {lon, lat, alt} });  // example: execute view change remotely (if publishing)
   ...
</code></pre>
<p>The general API for synchronized operations is provided by <a href="../odin_server/client.html">`main.js</a> and consists of the
following functions:</p>
<ul>
<li><code>requestRole (role)</code> - try to obtain a role (will fail if already registered on the server)</li>
<li><code>releaseRole (role)</code> - the converse (will fail if this is not an own role)</li>
<li><code>publishRole (role, isPublishing)</code> - start/stop publishing under specified role</li>
<li><code>subscribeToExtRole (role, isSubscribed)</code> - start/end subscription to an external role</li>
<li><code>publishCmd (cmd)</code> - send command to other users if there is a publishing own role and at least one remote subscriber</li>
</ul>
<p>Only <code>publishCmd</code> is used by general JS modules, all other functions are just for speciality modules such as <code>odin_share.js</code>
that implement remote sharing (normally through a dedicated UI).</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../odin_cesium/odin_cesium.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../odin_dem/odin_dem.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../odin_cesium/odin_cesium.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../odin_dem/odin_dem.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
